{
  "project": "Ralph-Kanban",
  "branchName": "ralph-iteration-prompt-improvements",
  "description": "Improve Ralph task execution flow with started flag and customizable iteration prompts",
  "started": true,
  "iterationPrompt": "Read .ralph/prompt.md and continue implementing the PRD.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add started and iterationPrompt fields to prd.json schema",
      "description": "As a developer, I need the prd.json schema to support new fields for controlling autonomous execution.",
      "acceptanceCriteria": [
        "Update Ralph service (ralph.rs) to parse 'started' boolean field from prd.json (default false)",
        "Update Ralph service to parse 'iterationPrompt' string field from prd.json (optional)",
        "Update RalphStatus struct if needed to expose these fields",
        "Run 'pnpm run generate-types' to regenerate shared types",
        "Typecheck passes (pnpm run check and pnpm run backend:check)"
      ],
      "priority": 1,
      "passes": true,
      "inProgress": false,
      "checkpoint": true,
      "notes": "Schema changes should be reviewed before proceeding to logic changes"
    },
    {
      "id": "US-002",
      "title": "Update prompt generation logic for Ralph tasks",
      "description": "As a system, I need to send the correct prompt based on Ralph task state so that interactive and autonomous phases work correctly.",
      "acceptanceCriteria": [
        "In container.rs, check if prd.json exists and has 'started: true'",
        "If started=true: use iterationPrompt from prd.json or default 'Read .ralph/prompt.md and continue implementing the PRD.'",
        "If started=false or prd.json missing: use original task.description",
        "Logic applies to both initial requests and auto-continue",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "inProgress": false,
      "checkpoint": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Block Continue action when prd.json doesn't exist",
      "description": "As a user, I should see a clear error when trying to continue a Ralph task that hasn't created its prd.json yet.",
      "acceptanceCriteria": [
        "In tasks.rs continue_ralph_execution endpoint, check if prd.json exists",
        "If prd.json doesn't exist, return error with message 'PRD not ready yet. Create prd.json first.'",
        "Use appropriate HTTP status code (400 Bad Request)",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "inProgress": false,
      "checkpoint": true,
      "notes": "Backend changes complete at this checkpoint - ready for README work"
    },
    {
      "id": "US-004",
      "title": "Update README with Ralph-Kanban branding and documentation",
      "description": "As a user visiting the repo, I want to understand that this is Ralph-Kanban with Ralph autonomous agent capabilities.",
      "acceptanceCriteria": [
        "Replace SVG logo header with ASCII art 'RALPH-KANBAN' title",
        "Update overview section to explain Ralph autonomous agent capabilities",
        "Document the two-phase workflow (interactive then autonomous)",
        "Document prd.json schema including started and iterationPrompt fields",
        "Mention MCP server capabilities for AI-driven task management",
        "Keep existing development/installation instructions intact"
      ],
      "priority": 4,
      "passes": false,
      "inProgress": true,
      "checkpoint": true,
      "notes": "Final checkpoint - full feature review"
    }
  ]
}
