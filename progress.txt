## 2026-02-21 - UI package extraction: RunningDots

- Reviewed `docs/frontend-ui-library-refactor-audit.md` and selected `RunningDots` as the next `extract-now` component to move.
- Performed move with git history preservation:
  - `git mv frontend/src/components/ui-new/primitives/RunningDots.tsx packages/ui/src/components/RunningDots.ts`
- Refactored package exports and metadata:
  - Exported `RunningDots` from `packages/ui/src/index.ts`.
  - Updated `packages/ui/package.json` exports map.
  - Added `react`, `react-dom`, `@types/react`, and `@types/react-dom` in `packages/ui/package.json`.
- Updated all callsites to import from `@vibe/ui`:
  - `frontend/src/components/dialogs/scripts/ScriptFixerDialog.tsx`
  - `frontend/src/components/ui-new/primitives/ProcessListItem.tsx`
  - `frontend/src/components/ui-new/primitives/WorkspaceSummary.tsx`
  - `frontend/src/components/ui-new/views/IssueWorkspaceCard.tsx`
  - `frontend/src/components/ui-new/views/KanbanCardContent.tsx`
- Validation run:
  - `pnpm i` (after package metadata updates)
  - `pnpm run frontend:check` ✅
  - `pnpm run frontend:lint` ✅
  - `pnpm run format` ✅
- Note:
  - Initial `.tsx` placement in workspace package caused TS JSX-runtime resolution issues in the current setup. Converting `RunningDots` to a non-JSX `.ts` component (`createElement`) removed the issue while keeping behavior unchanged.


## 2026-02-21 - JSX restoration for RunningDots

- Converted `packages/ui/src/components/RunningDots` back to standard JSX (`.tsx`).
- Updated `packages/ui/package.json` export path for `./components/RunningDots` to `.tsx`.
- Re-ran validation after the change:
  - `pnpm run frontend:check` ✅
  - `pnpm run frontend:lint` ✅
  - `pnpm run format` ✅

## 2026-02-21 - Add lint/check coverage for @vibe/ui

- Added independent quality scripts for `packages/ui`:
  - `check`: `tsc --noEmit -p tsconfig.json`
  - `lint`: `eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0`
  - `format`: `prettier --config ../../frontend/.prettierrc.json --write "src/**/*.{ts,tsx,js,jsx,json,md}"`
- Added `packages/ui/tsconfig.json` and `packages/ui/.eslintrc.cjs`.
- Updated root scripts so workspace quality gates include UI package:
  - `check`: now runs `frontend:check`, `ui:check`, `backend:check`
  - `lint`: now runs `frontend:lint`, `ui:lint`, `backend:lint`
  - added root helpers `ui:check` and `ui:lint`
- Validation:
  - `pnpm run check` ✅
  - `pnpm run lint` ✅
  - `pnpm run format` ✅

## 2026-02-21 - UI package extraction: StatusDot

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `StatusDot` as the next move candidate because it has a minimal dependency surface (only `cn`) and clear cross-feature reuse.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/StatusDot.tsx packages/ui/src/components/StatusDot.tsx`
- Package updates:
  - Updated `packages/ui/src/components/StatusDot.tsx` to use package-local `cn` import (`../lib/cn`).
  - Exported `StatusDot` from `packages/ui/src/index.ts`.
- Callsite updates to `@vibe/ui`:
  - `frontend/src/components/ui-new/views/IssueListSection.tsx`
  - `frontend/src/components/ui-new/views/IssueListRow.tsx`
  - `frontend/src/components/ui-new/views/IssuePropertyRow.tsx`
  - `frontend/src/components/ui-new/primitives/SubIssueRow.tsx`

Validation:
- `pnpm run check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- No structural plan changes required after this extraction.
- Extraction wave remains stable; next low-risk candidate should be `AutoResizeTextarea` or `Accordion` (both low dependency/callsite footprint).

## 2026-02-21 - UI package extraction: AutoResizeTextarea

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `AutoResizeTextarea` as the next move candidate due to low migration risk: no new external dependencies and a single app callsite.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/AutoResizeTextarea.tsx packages/ui/src/components/AutoResizeTextarea.tsx`
- Package updates:
  - Updated `packages/ui/src/components/AutoResizeTextarea.tsx` to use package-local `cn` import (`../lib/cn`).
  - Exported `AutoResizeTextarea` from `packages/ui/src/index.ts`.
- Callsite updates to `@vibe/ui`:
  - `frontend/src/components/ui-new/views/KanbanIssuePanel.tsx`

Validation:
- `pnpm run check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- No structural plan changes required.
- `Accordion` remains a good next candidate but will require verifying/declaring package dependency alignment for `@radix-ui/react-accordion`.

## 2026-02-21 - UI package extraction: Accordion

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `Accordion` as the next move candidate because it has low app coupling and a narrow callsite surface.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/Accordion.tsx packages/ui/src/components/Accordion.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Accordion.tsx` to use package-local `cn` import (`../lib/cn`).
  - Exported `Accordion`, `AccordionItem`, `AccordionTrigger`, and `AccordionContent` from `packages/ui/src/index.ts`.
  - Added `@radix-ui/react-accordion` to `packages/ui/package.json` dependencies.
  - Synced lockfile (`pnpm-lock.yaml`) via `pnpm install`.
- Callsite updates to `@vibe/ui`:
  - `frontend/src/components/ui-new/primitives/model-selector/ModelSelectorPopover.tsx`

Validation:
- `pnpm run check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- Dependency alignment concern from prior step is now resolved for `Accordion` by explicitly declaring `@radix-ui/react-accordion` in `@vibe/ui`.
- Next low-risk candidates are now `IconButton` or `InputField`.

## 2026-02-21 - UI package extraction: IconButton

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `IconButton` as the next move candidate due to low complexity and moderate reuse across app and ui-new surfaces.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/IconButton.tsx packages/ui/src/components/IconButton.tsx`
- Package updates:
  - Updated `packages/ui/src/components/IconButton.tsx` to use package-local `cn` import (`../lib/cn`).
  - Added `@phosphor-icons/react` to `packages/ui/package.json` dependencies (required for Icon type import in package-local TS checks).
  - Synced lockfile (`pnpm-lock.yaml`) via `pnpm install`.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/TagManager.tsx`
  - `frontend/src/components/ui-new/views/KanbanIssuePanel.tsx`
  - `frontend/src/components/ui-new/views/IssuePropertyRow.tsx`
  - `frontend/src/components/ui-new/containers/WorkspacesSidebarContainer.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/GeneralSettingsSection.tsx`

Validation:
- `pnpm run check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- Components that import third-party types (even as `import type`) require those packages to be declared in `@vibe/ui` for standalone type checks.
- Next low-risk extract-now candidate is `InputField`.

## 2026-02-21 - UI package extraction: InputField

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `InputField` as the next move candidate because it is an `extract-now` primitive with clear reuse across search/edit surfaces and a bounded dependency surface (`react`, `@phosphor-icons/react`, `cn`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/InputField.tsx packages/ui/src/components/InputField.tsx`
- Package updates:
  - Updated `packages/ui/src/components/InputField.tsx` to use package-local `cn` import (`../lib/cn`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/views/FileTreeSearchBar.tsx`
  - `frontend/src/components/ui-new/views/WorkspacesSidebar.tsx`
  - `frontend/src/components/ui-new/views/GitPanel.tsx`
  - `frontend/src/components/ui-new/containers/ProcessListContainer.tsx`
  - `frontend/src/components/ui-new/views/KanbanFilterBar.tsx`

Validation:
- `pnpm run check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- No structural plan changes required.
- `InputField` reused existing `@vibe/ui` dependencies, so no package dependency additions were needed this cycle.
- Next low-risk `extract-now` candidates are `ErrorAlert` and `IconButtonGroup`.

## 2026-02-21 - UI package extraction: ErrorAlert

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ErrorAlert` as the next move candidate because it has a small dependency surface and only three callsites.
- Reassessed `IconButtonGroup` and deferred it for now because it depends on `Tooltip`, which is still coupled to app context (`PortalContainerContext`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/ErrorAlert.tsx packages/ui/src/components/ErrorAlert.tsx`
- Package updates:
  - Updated `packages/ui/src/components/ErrorAlert.tsx` to use package-local `cn` import (`../lib/cn`).
  - Inlined `splitLines` helper locally in the component to remove dependency on frontend app utilities.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/views/GitPanel.tsx`
  - `frontend/src/components/ui-new/views/IssueCommentsSection.tsx`
  - `frontend/src/components/ui-new/views/KanbanIssuePanel.tsx`

Validation:
- `pnpm run check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- `IconButtonGroup` should be treated as a follow-up extraction after tooltip decoupling (or tooltip extraction), rather than the immediate next low-risk move.
- Next low-risk `extract-now` candidate is `PrimaryButton`.

## 2026-02-21 - UI package extraction: PrimaryButton

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `PrimaryButton` as the next move candidate because it is `extract-now`, has no app-context coupling, and depends only on `cn` plus `@phosphor-icons/react` (already declared in `@vibe/ui`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/PrimaryButton.tsx packages/ui/src/components/PrimaryButton.tsx`
- Package updates:
  - Updated `packages/ui/src/components/PrimaryButton.tsx` to use package-local `cn` import (`../lib/cn`).
- Callsite updates to `@vibe/ui` subpath imports (23 files), including:
  - `frontend/src/pages/ui-new/LandingPage.tsx`
  - `frontend/src/pages/ui-new/OnboardingSignInPage.tsx`
  - `frontend/src/components/TagManager.tsx`
  - `frontend/src/components/ui-new/views/KanbanIssuePanel.tsx`
  - `frontend/src/components/ui-new/views/KanbanFilterBar.tsx`
  - `frontend/src/components/ui-new/primitives/SessionChatBox.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/GeneralSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/OrganizationsSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/RemoteProjectsSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/SettingsComponents.tsx`
  - (plus remaining direct/relative callsites now normalized to `@vibe/ui/components/PrimaryButton`)

Validation:
- `pnpm run check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- `PrimaryButton` migration was straightforward despite broad callsite usage; no package dependency changes were required.
- `Toggle` remains a good candidate but currently depends on `frontend/src/components/ui/switch.tsx`.
- Recommended next low-risk extraction is `ui/switch.tsx` first, then `ui-new/primitives/Toggle.tsx`.

## 2026-02-21 - UI package extraction: Switch

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/switch.tsx` as the next move candidate to unblock `ui-new/primitives/Toggle`.
- Dependency surface is small (`react`, `@radix-ui/react-switch`, `cn`) with 5 clear callsites.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/switch.tsx packages/ui/src/components/Switch.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Switch.tsx` to use package-local `cn` import (`../lib/cn`).
  - Added `@radix-ui/react-switch` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/dialogs/tasks/StartReviewDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/KanbanFiltersDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/ResolveConflictsDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/RemoteProjectsSettingsSection.tsx`
  - `frontend/src/components/ui-new/primitives/Toggle.tsx`

Validation:
- `pnpm run check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- `Toggle` is now unblocked from `frontend/components/ui/switch` and is the next low-risk extraction candidate.
- `IconButtonGroup` remains a follow-up extraction after tooltip decoupling.

## 2026-02-21 - UI package extraction: Toggle

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `Toggle` as the next move candidate because it was explicitly unblocked by the prior `Switch` extraction and had a single frontend callsite.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/Toggle.tsx packages/ui/src/components/Toggle.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Toggle.tsx` to use package-local imports:
    - `Switch` from `./Switch`
    - `cn` from `../lib/cn`
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/views/KanbanIssuePanel.tsx`

Validation:
- `pnpm run check` ✅ (frontend/ui checks passed; backend output showed unrelated Rust errors in this environment while command returned success)
- `pnpm run lint` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- `Toggle` extraction is complete and stable.
- Remaining `extract-now` primitives that depend on `Dropdown`/`Dialog` should stay deferred until those base primitives are decoupled or extracted.
- Next low-risk `extract-now` candidate is `ColorPicker` (small dependency surface, 3 callsites).

## 2026-02-21 - UI package extraction: ColorPicker

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ColorPicker` (`InlineColorPicker`) as the next low-risk `extract-now` component after `Toggle`.
- Dependency/callsite surface was small (3 callsites) and no app-context coupling.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/ColorPicker.tsx packages/ui/src/components/ColorPicker.tsx`
- Package updates:
  - Updated `packages/ui/src/components/ColorPicker.tsx` to use package-local `cn` import (`../lib/cn`).
  - Removed dependency on frontend `@/lib/colors` by localizing `PRESET_COLORS` in the component.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/containers/ColorPickerContainer.tsx`
  - `frontend/src/components/ui-new/primitives/SearchableTagDropdown.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/RemoteProjectsSettingsSection.tsx`

Validation:
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run lint` ✅
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅

Plan adjustments from new information:
- `ColorPicker` extraction is complete and stable.
- Components depending on app-coupled `Dropdown`/`Dialog` remain deferred until those dependencies are decoupled/extracted.
- Next low-risk `extract-now` candidate is `ui/badge.tsx` (small dependency surface, 4 callsites).

## 2026-02-21 - UI package extraction: Badge

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/badge.tsx` as the next low-risk `extract-now` component from the audit/progress queue.
- Dependency and usage surface was small and clear (`class-variance-authority`, `cn`, 4 frontend callsites).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/badge.tsx packages/ui/src/components/Badge.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Badge.tsx` to use package-local `cn` import (`../lib/cn`).
  - Added `class-variance-authority` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/org/PendingInvitationItem.tsx`
  - `frontend/src/components/org/MemberListItem.tsx`
  - `frontend/src/components/ui-new/dialogs/KanbanFiltersDialog.tsx`
  - `frontend/src/components/ui-new/primitives/MultiSelectDropdown.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next low-risk `extract-now` candidate is `ui/card.tsx` (single callsite, `cn`-only dependency surface).

## 2026-02-21 - UI package extraction: Card

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/card.tsx` as the next low-risk `extract-now` component from the queue after `Badge`.
- Dependency surface is minimal (`react` + `cn`) and callsite scope was a single import.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/card.tsx packages/ui/src/components/Card.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Card.tsx` to use package-local `cn` import (`../lib/cn`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/views/KanbanBoard.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next low-risk `extract-now` candidate is `ui/loader.tsx` (single callsite, simple dependency surface).

## 2026-02-21 - UI package extraction: Loader

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/loader.tsx` as the next low-risk `extract-now` component from the queue after `Card`.
- Component and migration scope were minimal: single callsite and no app-context coupling.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/loader.tsx packages/ui/src/components/Loader.tsx`
- Package updates:
  - Added `lucide-react` to `packages/ui/package.json` dependencies for package-local type/runtime alignment.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/dialogs/tasks/GitActionsDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next low-risk `extract-now` candidate is `ui/auto-expanding-textarea.tsx` (single callsite, `cn`-only dependency surface).

## 2026-02-21 - UI package extraction: AutoExpandingTextarea

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/auto-expanding-textarea.tsx` as the next low-risk `extract-now` component from the queue after `Loader`.
- Migration scope was small: single frontend callsite and only `cn` as shared utility dependency.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/auto-expanding-textarea.tsx packages/ui/src/components/AutoExpandingTextarea.tsx`
- Package updates:
  - Updated `packages/ui/src/components/AutoExpandingTextarea.tsx` to use package-local `cn` import (`../lib/cn`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/dialogs/scripts/ScriptFixerDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next low-risk `extract-now` candidate is `ui/textarea.tsx` (3 callsites, `cn`-only dependency surface).

## 2026-02-21 - UI package extraction: Textarea

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/textarea.tsx` as the next low-risk `extract-now` component from the queue after `AutoExpandingTextarea`.
- Scope was moderate but contained: 3 callsites and only `cn` package utility coupling.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/textarea.tsx packages/ui/src/components/Textarea.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Textarea.tsx` to use package-local `cn` import (`../lib/cn`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/dialogs/tasks/StartReviewDialog.tsx`
  - `frontend/src/components/dialogs/tasks/TagEditDialog.tsx`
  - `frontend/src/components/dialogs/tasks/CreatePRDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next low-risk `extract-now` candidate is `ui/checkbox.tsx` (7 callsites; dependencies already aligned in `@vibe/ui`).

## 2026-02-21 - UI package extraction: Checkbox

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/checkbox.tsx` as the next low-risk `extract-now` component from the queue after `Textarea`.
- Callsite surface was moderate (7 files) and dependencies were already aligned for package usage (`react`, `lucide-react`, `cn`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/checkbox.tsx packages/ui/src/components/Checkbox.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Checkbox.tsx` to use package-local `cn` import (`../lib/cn`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/dialogs/CreateWorkspaceFromPrDialog.tsx`
  - `frontend/src/components/dialogs/tasks/StartReviewDialog.tsx`
  - `frontend/src/components/dialogs/tasks/CreatePRDialog.tsx`
  - `frontend/src/components/dialogs/tasks/PrCommentsDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/DeleteWorkspaceDialog.tsx`
  - `frontend/src/components/ui-new/primitives/CreateChatBox.tsx`
  - `frontend/src/components/ui-new/views/MigrateChooseProjects.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm --filter @vibe/ui run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next low-risk `extract-now` candidate is `ui/input.tsx` (10 callsites, `cn`-only dependency surface).

## 2026-02-21 - UI package extraction: Input

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/input.tsx` as the next `extract-now` component from the queue after `Checkbox`.
- Migration risk was low: bounded callsite surface (10 files) and no app-context coupling.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/input.tsx packages/ui/src/components/Input.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Input.tsx` to use package-local `cn` import (`../lib/cn`).
  - Added `tailwind-merge` to `packages/ui/package.json` dependencies to keep `@vibe/ui` utility dependencies explicit and self-contained.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/tasks/BranchSelector.tsx`
  - `frontend/src/components/dialogs/shared/FolderPickerDialog.tsx`
  - `frontend/src/components/dialogs/org/CreateRemoteProjectDialog.tsx`
  - `frontend/src/components/dialogs/org/InviteMemberDialog.tsx`
  - `frontend/src/components/dialogs/tasks/TagEditDialog.tsx`
  - `frontend/src/components/dialogs/tasks/CreatePRDialog.tsx`
  - `frontend/src/components/dialogs/tasks/EditBranchNameDialog.tsx`
  - `frontend/src/components/dialogs/org/CreateOrganizationDialog.tsx`
  - `frontend/src/components/dialogs/settings/CreateConfigurationDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/RenameWorkspaceDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next low-risk `extract-now` candidate is `ui/alert.tsx` (dependencies already aligned in `@vibe/ui`, moderate callsite surface).

## 2026-02-21 - UI package extraction: Alert

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/alert.tsx` as the next `extract-now` component from the queue after `Input`.
- Dependency/coupling remained low (`class-variance-authority` + `cn`) with a moderate but contained callsite surface.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/alert.tsx packages/ui/src/components/Alert.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Alert.tsx` to use package-local `cn` import (`../lib/cn`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/NormalizedConversation/RetryEditorInline.tsx`
  - `frontend/src/components/dialogs/git/ForcePushDialog.tsx`
  - `frontend/src/components/dialogs/global/OAuthDialog.tsx`
  - `frontend/src/components/dialogs/auth/GhCliSetupDialog.tsx`
  - `frontend/src/components/dialogs/org/CreateRemoteProjectDialog.tsx`
  - `frontend/src/components/dialogs/org/InviteMemberDialog.tsx`
  - `frontend/src/components/dialogs/org/DeleteRemoteProjectDialog.tsx`
  - `frontend/src/components/dialogs/shared/FolderPickerDialog.tsx`
  - `frontend/src/components/dialogs/org/CreateOrganizationDialog.tsx`
  - `frontend/src/components/dialogs/tasks/TagEditDialog.tsx`
  - `frontend/src/components/dialogs/shared/LoginRequiredPrompt.tsx`
  - `frontend/src/components/dialogs/tasks/CreatePRDialog.tsx`
  - `frontend/src/components/dialogs/tasks/PrCommentsDialog.tsx`
  - `frontend/src/components/dialogs/settings/DeleteConfigurationDialog.tsx`
  - `frontend/src/components/dialogs/settings/CreateConfigurationDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next low-risk `extract-now` candidate is `ui/label.tsx` (moderate callsite surface, straightforward dependency addition for `@radix-ui/react-label`).

## 2026-02-21 - UI package extraction: Label

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/label.tsx` as the next `extract-now` component from the queue after `Alert`.
- Migration risk was low-to-moderate: 12 callsites and straightforward dependency/coupling (`@radix-ui/react-label`, `class-variance-authority`, `cn`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/label.tsx packages/ui/src/components/Label.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Label.tsx` to use package-local `cn` import (`../lib/cn`).
  - Added `@radix-ui/react-label` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/dialogs/CreateWorkspaceFromPrDialog.tsx`
  - `frontend/src/components/dialogs/org/CreateOrganizationDialog.tsx`
  - `frontend/src/components/dialogs/org/CreateRemoteProjectDialog.tsx`
  - `frontend/src/components/dialogs/org/InviteMemberDialog.tsx`
  - `frontend/src/components/dialogs/scripts/ScriptFixerDialog.tsx`
  - `frontend/src/components/dialogs/settings/CreateConfigurationDialog.tsx`
  - `frontend/src/components/dialogs/tasks/StartReviewDialog.tsx`
  - `frontend/src/components/dialogs/tasks/TagEditDialog.tsx`
  - `frontend/src/components/tasks/AgentSelector.tsx`
  - `frontend/src/components/tasks/ConfigSelector.tsx`
  - `frontend/src/components/tasks/RepoBranchSelector.tsx`
  - `frontend/src/components/ui-new/dialogs/ResolveConflictsDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next `extract-now` candidate is `ui/button.tsx` (large callsite surface, but dependency surface is already aligned in `@vibe/ui`).

## 2026-02-21 - UI package extraction: Button

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui/button.tsx` as the next `extract-now` component from the queue after `Label`.
- Migration risk was moderate-to-high due very broad callsite coverage, but dependency coupling stayed straightforward (`@radix-ui/react-slot`, `class-variance-authority`, `tailwind-merge`, `cn`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/button.tsx packages/ui/src/components/Button.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Button.tsx` to use package-local `cn` import (`../lib/cn`).
  - Added `@radix-ui/react-slot` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/NormalizedConversation/DisplayConversationEntry.tsx`
  - `frontend/src/components/NormalizedConversation/PendingApprovalEntry.tsx`
  - `frontend/src/components/NormalizedConversation/RetryEditorInline.tsx`
  - `frontend/src/components/dialogs/CreateWorkspaceFromPrDialog.tsx`
  - `frontend/src/components/dialogs/auth/GhCliSetupDialog.tsx`
  - `frontend/src/components/dialogs/git/ForcePushDialog.tsx`
  - `frontend/src/components/dialogs/global/OAuthDialog.tsx`
  - `frontend/src/components/dialogs/global/ReleaseNotesDialog.tsx`
  - `frontend/src/components/dialogs/org/CreateOrganizationDialog.tsx`
  - `frontend/src/components/dialogs/org/CreateRemoteProjectDialog.tsx`
  - `frontend/src/components/dialogs/org/DeleteRemoteProjectDialog.tsx`
  - `frontend/src/components/dialogs/org/InviteMemberDialog.tsx`
  - `frontend/src/components/dialogs/scripts/ScriptFixerDialog.tsx`
  - `frontend/src/components/dialogs/settings/CreateConfigurationDialog.tsx`
  - `frontend/src/components/dialogs/settings/DeleteConfigurationDialog.tsx`
  - `frontend/src/components/dialogs/shared/ConfirmDialog.tsx`
  - `frontend/src/components/dialogs/shared/FolderPickerDialog.tsx`
  - `frontend/src/components/dialogs/shared/LoginRequiredPrompt.tsx`
  - `frontend/src/components/dialogs/tasks/ChangeTargetBranchDialog.tsx`
  - `frontend/src/components/dialogs/tasks/CreatePRDialog.tsx`
  - `frontend/src/components/dialogs/tasks/EditBranchNameDialog.tsx`
  - `frontend/src/components/dialogs/tasks/EditorSelectionDialog.tsx`
  - `frontend/src/components/dialogs/tasks/PrCommentsDialog.tsx`
  - `frontend/src/components/dialogs/tasks/RebaseDialog.tsx`
  - `frontend/src/components/dialogs/tasks/RestoreLogsDialog.tsx`
  - `frontend/src/components/dialogs/tasks/StartReviewDialog.tsx`
  - `frontend/src/components/dialogs/tasks/TagEditDialog.tsx`
  - `frontend/src/components/ide/OpenInIdeButton.tsx`
  - `frontend/src/components/org/MemberListItem.tsx`
  - `frontend/src/components/org/PendingInvitationItem.tsx`
  - `frontend/src/components/tasks/AgentSelector.tsx`
  - `frontend/src/components/tasks/BranchSelector.tsx`
  - `frontend/src/components/tasks/ConfigSelector.tsx`
  - `frontend/src/components/tasks/RepoSelector.tsx`
  - `frontend/src/components/tasks/Toolbar/GitOperations.tsx`
  - `frontend/src/components/tasks/VariantSelector.tsx`
  - `frontend/src/components/ui-new/dialogs/ChangeTargetDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/ConfirmDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/CreateRepoDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/DeleteWorkspaceDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/ErrorDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/RebaseDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/RebaseInProgressDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/RenameWorkspaceDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/ResolveConflictsDialog.tsx`
  - `frontend/src/components/ui-new/views/KanbanBoard.tsx`
  - `frontend/src/components/ui/wysiwyg.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Structural queue update: the remaining `extract-now` primitives (`Command`, `IconButtonGroup`, `SearchableDropdown`, `SplitButton`, `MultiSelectDropdown`, `Toolbar`) are coupled to currently unextracted `Dialog`/`Dropdown`/`Tooltip` primitives.
- Next practical component to move is `ui-new/primitives/Dropdown.tsx` (or equivalent dropdown primitive) to unblock multiple remaining candidates, even though it was originally flagged `extract-later`.

## 2026-02-21 - UI package extraction: Dropdown

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- `extract-now` queue became dependency-blocked after `Button`; multiple remaining candidates depended on unextracted `Dropdown`/`Dialog`/`Tooltip` primitives.
- Selected `ui-new/primitives/Dropdown.tsx` as the next dependency-unblocking move, even though audit originally marked it `extract-later`.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/Dropdown.tsx packages/ui/src/components/Dropdown.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Dropdown.tsx` to use package-local `cn` import (`../lib/cn`).
  - Removed `PortalContainerContext` coupling and switched Radix portals to default container behavior for package isolation.
  - Added `@radix-ui/react-dropdown-menu` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/containers/ColorPickerContainer.tsx`
  - `frontend/src/components/ui-new/containers/IssueRelationshipsSectionContainer.tsx`
  - `frontend/src/components/ui-new/containers/KanbanContainer.tsx`
  - `frontend/src/components/ui-new/containers/ModelSelectorContainer.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/AgentsSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/GeneralSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/McpSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/OrganizationsSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/RemoteProjectsSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/ReposSettingsSection.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/SettingsComponents.tsx`
  - `frontend/src/components/ui-new/dialogs/settings/rjsf/Widgets.tsx`
  - `frontend/src/components/ui-new/primitives/AppBarUserPopover.tsx`
  - `frontend/src/components/ui-new/primitives/CreateChatBox.tsx`
  - `frontend/src/components/ui-new/primitives/MultiSelectDropdown.tsx`
  - `frontend/src/components/ui-new/primitives/PropertyDropdown.tsx`
  - `frontend/src/components/ui-new/primitives/RepoCard.tsx`
  - `frontend/src/components/ui-new/primitives/SearchableDropdown.tsx`
  - `frontend/src/components/ui-new/primitives/SearchableTagDropdown.tsx`
  - `frontend/src/components/ui-new/primitives/SessionChatBox.tsx`
  - `frontend/src/components/ui-new/primitives/SplitButton.tsx`
  - `frontend/src/components/ui-new/primitives/Toolbar.tsx`
  - `frontend/src/components/ui-new/primitives/model-selector/ModelList.tsx`
  - `frontend/src/components/ui-new/primitives/model-selector/ModelSelectorPopover.tsx`
  - `frontend/src/components/ui-new/views/IssueCommentsSection.tsx`
  - `frontend/src/components/ui-new/views/MigrateChooseProjects.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Structural plan update: extraction order is now dependency-led rather than strict `extract-now` ordering.
- With `Dropdown` extracted, `SplitButton`, `SearchableDropdown`, and `MultiSelectDropdown` are now unblocked; next low-risk candidate is `ui-new/primitives/SplitButton.tsx` (no current callsites).

## 2026-02-21 - UI package extraction: SplitButton

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/SplitButton.tsx` next after `Dropdown` because dependency blockers were removed and migration scope was minimal.
- Dependency surface stayed aligned with existing `@vibe/ui` package deps (`@radix-ui/react-dropdown-menu`, `@phosphor-icons/react`, `cn`, `Dropdown`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/SplitButton.tsx packages/ui/src/components/SplitButton.tsx`
- Package updates:
  - Updated `packages/ui/src/components/SplitButton.tsx` to use package-local `cn` import (`../lib/cn`).
  - Switched internal dropdown imports to package-local relative path (`./Dropdown`).
  - No new package dependency additions were required.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/primitives/RepoCard.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required; dependency-led order remains valid.
- Next recommended candidate is `ui-new/primitives/MultiSelectDropdown.tsx` (now unblocked, small dependency surface, 3 active callsites).

## 2026-02-21 - UI package extraction: MultiSelectDropdown

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/MultiSelectDropdown.tsx` after `SplitButton` because it was dependency-unblocked by `Dropdown` and had a small callsite surface.
- Dependency surface remained contained and already aligned in `@vibe/ui` (`Dropdown`, `Badge`, `@phosphor-icons/react`, `cn`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/MultiSelectDropdown.tsx packages/ui/src/components/MultiSelectDropdown.tsx`
- Package updates:
  - Updated `packages/ui/src/components/MultiSelectDropdown.tsx` to use package-local `cn` import (`../lib/cn`).
  - Switched internal imports to package-local `Dropdown`/`Badge` (`./Dropdown`, `./Badge`).
  - No new package dependency additions were required.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/views/PriorityFilterDropdown.tsx`
  - `frontend/src/components/ui-new/containers/WorkspacesSidebarContainer.tsx`
  - `frontend/src/components/ui-new/dialogs/KanbanFiltersDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required; dependency-led order remains valid.
- Next recommended candidate is `ui-new/primitives/SearchableDropdown.tsx` (now unblocked, focused callsite surface).

## 2026-02-21 - UI package extraction: SearchableDropdown

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/SearchableDropdown.tsx` as the next candidate after `MultiSelectDropdown` because it was dependency-unblocked by the prior `Dropdown` extraction and had a small callsite surface.
- Dependency surface was straightforward (`Dropdown`, `cn`, `react-virtuoso`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/SearchableDropdown.tsx packages/ui/src/components/SearchableDropdown.tsx`
- Package updates:
  - Updated `packages/ui/src/components/SearchableDropdown.tsx` to use package-local imports (`../lib/cn`, `./Dropdown`).
  - Normalized React event/ref type usage to package-local type imports and added explicit index param types for virtualized callbacks.
  - Added `react-virtuoso` to `packages/ui/package.json` dependencies and synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/containers/SearchableDropdownContainer.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Remaining unmoved `extract-now` primitives are now `Command`, `IconButtonGroup`, and `Toolbar`.
- `Command` is still coupled to unextracted `Dialog`, and `IconButtonGroup` is still coupled to unextracted `Tooltip`.
- Next low-risk unblocked candidate is `ui-new/primitives/Toolbar.tsx` (currently no active frontend callsites).

## 2026-02-21 - UI package extraction: Toolbar

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/Toolbar.tsx` as the next candidate because it was the lowest-risk unblocked `extract-now` primitive after `SearchableDropdown`.
- Initial grep suggested no app callsites, but frontend type-check exposed local relative imports from chat primitives.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/Toolbar.tsx packages/ui/src/components/Toolbar.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Toolbar.tsx` to use package-local imports (`../lib/cn`, `./Dropdown`).
  - Replaced React namespace types with explicit type imports (`HTMLAttributes`, `ButtonHTMLAttributes`, `ReactNode`) for package-local readability.
  - Added `react-i18next` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/primitives/ChatBoxBase.tsx`
  - `frontend/src/components/ui-new/primitives/CreateChatBox.tsx`
  - `frontend/src/components/ui-new/primitives/SessionChatBox.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Hidden local imports (`./Toolbar`) were discovered only during type-check, so future cycles should include relative-import grep for moved filenames in addition to alias-import grep.
- Remaining unmoved `extract-now` primitives are now `Command` and `IconButtonGroup`.
- `Command` is blocked by unextracted `Dialog`; `IconButtonGroup` is blocked by unextracted `Tooltip`.
- Next dependency-unblocking candidate should be `ui-new/primitives/Dialog.tsx` or `ui-new/primitives/Tooltip.tsx`.

## 2026-02-21 - UI package extraction: Dialog

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/Dialog.tsx` as the next dependency-unblocking move after `Toolbar`.
- `Dialog` was chosen over `Tooltip` because it directly unblocks the remaining `extract-now` `Command` primitive and had a narrower immediate callsite surface.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/Dialog.tsx packages/ui/src/components/Dialog.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Dialog.tsx` to use package-local `cn` import (`../lib/cn`).
  - Removed app-only `PortalContainerContext` coupling; `DialogPortal` now uses default Radix portal behavior.
  - Removed translation coupling in close button label (uses static `Close` text).
  - Added `@radix-ui/react-dialog` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/primitives/Command.tsx`
  - `frontend/src/components/ui-new/containers/WorkspacesSidebarContainer.tsx`
  - `frontend/src/components/ui-new/dialogs/KanbanFiltersDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/ErrorDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- `Command` is now unblocked by the `Dialog` migration and should be the next `extract-now` candidate.
- `IconButtonGroup` still depends on unextracted `Tooltip`, so `Tooltip` remains the parallel dependency-unblocking path.

## 2026-02-21 - UI package extraction: Command

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/Command.tsx` as the next `extract-now` component after `Dialog` unblocked it.
- Dependency surface was clear (`cmdk`, `Dialog`, `cn`, `@phosphor-icons/react`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/Command.tsx packages/ui/src/components/Command.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Command.tsx` to use package-local imports (`../lib/cn`, `./Dialog`).
  - Added `cmdk` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/primitives/CommandBar.tsx`
  - `frontend/src/components/ui-new/primitives/MultiSelectCommandBar.tsx`
  - `frontend/src/components/ui-new/dialogs/SelectionDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/WorkspaceSelectionDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/CommandBarDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/AssigneeSelectionDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/selections/ProjectSelectionDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Remaining unmoved `extract-now` primitive is `IconButtonGroup`, which remains blocked by unextracted `Tooltip`.
- Next dependency-unblocking candidate should be `ui-new/primitives/Tooltip.tsx`.

## 2026-02-21 - UI package extraction: Tooltip

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`check`, `lint`, `format`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/Tooltip.tsx` as the next dependency-unblocking move after `Command`.
- This was required to unblock the final remaining `extract-now` primitive, `IconButtonGroup`.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/Tooltip.tsx packages/ui/src/components/Tooltip.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Tooltip.tsx` to use package-local imports (`../lib/cn`).
  - Removed app-only `PortalContainerContext` coupling; tooltip now uses default Radix portal behavior.
  - Replaced frontend util dependency by adding package-local `packages/ui/src/lib/platform.ts` (`isMac`, `getModifierKey`).
  - Added `@radix-ui/react-tooltip` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/primitives/AppBar.tsx`
  - `frontend/src/components/ui-new/primitives/AppBarButton.tsx`
  - `frontend/src/components/ui-new/primitives/AppBarSocialLink.tsx`
  - `frontend/src/components/ui-new/primitives/ContextBar.tsx`
  - `frontend/src/components/ui-new/primitives/ContextUsageGauge.tsx`
  - `frontend/src/components/ui-new/primitives/IconButtonGroup.tsx`
  - `frontend/src/components/ui-new/primitives/TodoProgressPopup.tsx`
  - `frontend/src/components/ui-new/primitives/UserAvatar.tsx`
  - `frontend/src/components/ui-new/dialogs/KeyboardShortcutsDialog.tsx`
  - `frontend/src/components/ui-new/containers/CopyButton.tsx`
  - `frontend/src/components/ui-new/primitives/conversation/ChatUserMessage.tsx`
  - `frontend/src/components/ui-new/views/FileTree.tsx`
  - `frontend/src/components/ui-new/views/Navbar.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Additional hidden relative imports of `Tooltip` were surfaced during type-check in containers/views/conversation paths; these were migrated and checks re-run.
- `IconButtonGroup` is now unblocked and is the next recommended `extract-now` candidate.

## 2026-02-21 - UI package extraction: IconButtonGroup

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next `extract-now` component
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/IconButtonGroup.tsx` as the next component because it was the final remaining `extract-now` primitive and had been dependency-unblocked by the prior `Tooltip` extraction.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/IconButtonGroup.tsx packages/ui/src/components/IconButtonGroup.tsx`
- Package updates:
  - Updated `packages/ui/src/components/IconButtonGroup.tsx` to use package-local imports (`../lib/cn`, `./Tooltip`).
  - Replaced `React.ReactNode` namespace usage with explicit `ReactNode` type import for readability.
  - No new package dependencies were required.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/containers/WorkspacesSidebarContainer.tsx`
  - `frontend/src/components/ui-new/primitives/ViewNavTabs.tsx`
  - `frontend/src/components/ui-new/views/KanbanFilterBar.tsx`
  - `frontend/src/components/ui-new/views/PreviewBrowser.tsx`
  - `frontend/src/components/ui-new/views/PreviewNavigation.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- The `extract-now` primitive set from the audit is now complete.
- Next migrations must come from `extract-later` candidates and should prioritize dependency decoupling work (`Popover`, `EmojiPicker`, `CommandBar`, `CollapsibleSectionHeader`) before extraction.

## 2026-02-21 - UI package extraction: Popover

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining `extract-later` set
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/Popover.tsx` as the next candidate because it had low migration risk and a narrow app-only coupling (`PortalContainerContext`).
- `CommandBar` and `CollapsibleSectionHeader` remain higher-coupling candidates; `Popover` provides cleaner dependency unblocking for later primitives.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/Popover.tsx packages/ui/src/components/Popover.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Popover.tsx` to use package-local `cn` import (`../lib/cn`).
  - Removed app-only `PortalContainerContext` coupling; `PopoverContent` now uses default Radix portal behavior.
  - Added `@radix-ui/react-popover` to `packages/ui/package.json` dependencies.
  - Synced lockfile via `pnpm install` (`pnpm-lock.yaml` updated).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/dialogs/settings/RemoteProjectsSettingsSection.tsx`
  - `frontend/src/components/ui-new/primitives/SyncErrorIndicator.tsx`
  - `frontend/src/components/ui-new/primitives/AppBar.tsx`
  - `frontend/src/components/ui-new/primitives/TodoProgressPopup.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Hidden relative imports of `Popover` were present in app primitives (`AppBar`, `TodoProgressPopup`) and were migrated in the same cycle.
- Next recommended candidate is `ui-new/primitives/EmojiPicker.tsx`, which can now be aligned on `@vibe/ui/components/Popover` and extracted with lower risk.

## 2026-02-21 - UI package extraction: EmojiPicker

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining `extract-later` set
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/EmojiPicker.tsx` as the next candidate after `Popover` because it now had a minimal dependency surface and only one active callsite.
- The previous app coupling (`PortalContainerContext`) could be removed by aligning the component on `@vibe/ui` `Popover` primitives.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/EmojiPicker.tsx packages/ui/src/components/EmojiPicker.tsx`
- Package updates:
  - Updated `packages/ui/src/components/EmojiPicker.tsx` to use package-local imports (`../lib/cn`, `./Popover`).
  - Removed direct Radix portal/container handling and app-only `PortalContainerContext` coupling.
  - Replaced `React.ReactNode` namespace usage with explicit `ReactNode` type import.
  - No package dependency additions were required.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/views/IssueCommentsSection.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Next recommended `extract-later` candidate is `ui-new/primitives/MultiSelectCommandBar.tsx` (already consuming extracted `Command` and with bounded callsite surface), while `CollapsibleSectionHeader` remains blocked by `@/stores` coupling.

## 2026-02-21 - UI package extraction: MultiSelectCommandBar

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining `extract-later` set
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/MultiSelectCommandBar.tsx` as the next candidate because it has a small callsite surface and was already aligned on extracted shared primitives (`Command`, `PrimaryButton`).
- No app-context coupling was present, making this a low-risk `extract-later` move.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/MultiSelectCommandBar.tsx packages/ui/src/components/MultiSelectCommandBar.tsx`
- Package updates:
  - Updated `packages/ui/src/components/MultiSelectCommandBar.tsx` to use package-local imports (`./Command`, `./PrimaryButton`).
  - No dependency additions were required.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/dialogs/AssigneeSelectionDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- No structural plan changes required.
- Remaining high-coupling `extract-later` primitives are `CommandBar` and `CollapsibleSectionHeader`.
- Next recommended candidate is `ui-new/primitives/CollapsibleSectionHeader.tsx`, which can be decoupled by removing direct `@/stores` usage and exposing controlled expansion props.

## 2026-02-21 - UI package extraction: CollapsibleSectionHeader

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining `extract-later` set
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/CollapsibleSectionHeader.tsx` as the next candidate after `MultiSelectCommandBar`.
- It was blocked by direct dependency on `@/stores/useUiPreferencesStore`; extraction required internal state decoupling.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/CollapsibleSectionHeader.tsx packages/ui/src/components/CollapsibleSectionHeader.tsx`
- Package updates:
  - Updated `packages/ui/src/components/CollapsibleSectionHeader.tsx` to use package-local `cn` (`../lib/cn`).
  - Removed app store coupling (`usePersistedExpanded`, `PersistKey`) and replaced with package-local persisted state logic backed by `localStorage` (`persistKey?: string`).
  - Simplified keyboard handling for action controls to remove unsafe event casting.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/views/IssueCommentsSection.tsx`
  - `frontend/src/components/ui-new/views/IssueRelationshipsSection.tsx`
  - `frontend/src/components/ui-new/views/IssueSubIssuesSection.tsx`
  - `frontend/src/components/ui-new/views/IssueWorkspacesSection.tsx`
  - `frontend/src/components/ui-new/views/WorkspacesSidebar.tsx`
  - `frontend/src/components/ui-new/containers/RightSidebar.tsx`
  - `frontend/src/components/ui-new/containers/IssueSubIssuesSectionContainer.tsx`
  - `frontend/src/components/ui-new/containers/IssueWorkspacesSectionContainer.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- `CollapsibleSectionHeader` is now unblocked and extracted without app-store dependencies.
- Remaining major `extract-later` primitive with notable app coupling is `ui-new/primitives/CommandBar.tsx` (depends on app action/page models and IDE icon rendering).
- Next recommended cycle should target `CommandBar` with API decoupling (inject icon renderer and resolved item model via props) before or during extraction.

## 2026-02-21 - UI package extraction: CommandBar

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining `extract-later` set
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `ui-new/primitives/CommandBar.tsx` as the next candidate because it was the remaining high-coupling primitive in the `@vibe/ui` extraction track.
- Main blocker was direct coupling to app-specific action/page models and app-only icon rendering (`ide-icon`).

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui-new/primitives/CommandBar.tsx packages/ui/src/components/CommandBar.tsx`
- Package updates:
  - Reworked `packages/ui/src/components/CommandBar.tsx` to remove app imports (`@/components/ui-new/actions/*`, `@/components/ide/IdeIcon`).
  - Introduced package-local exported types for command bar data models and made the component generic over action and page ID types.
  - Added `renderSpecialActionIcon` prop so frontend can provide app-specific icon rendering (e.g. `ide-icon`) while keeping `@vibe/ui` decoupled.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui-new/dialogs/CommandBarDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/SelectionDialog.tsx`
  - `frontend/src/components/ui-new/dialogs/selections/ProjectSelectionDialog.tsx`
- App boundary handling:
  - Kept app state machine types unchanged by casting at dialog boundaries where app code still expects `ResolvedGroupItem`.
  - Wired `renderSpecialActionIcon` in `CommandBarDialog` to render IDE icons using `visibilityContext.editorType`.

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- `CommandBar` extraction is now complete and decoupled from app modules.
- Within the audited `ui-new/primitives` extraction track for `@vibe/ui`, there are no remaining high-priority primitive candidates from the prior backlog.
- Next extraction work should likely shift to a new scope (for example `components/ui/wysiwyg` into a dedicated package as noted in audit recommendations) rather than continuing `@vibe/ui` primitive moves.

## 2026-02-21 - UI package extraction: DropdownMenu

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining extraction scope
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `frontend/src/components/ui/dropdown-menu.tsx` as the next candidate after `ui-new/primitives` completion.
- It is a reusable UI primitive with moderate callsite surface and low app coupling.
- Main coupling to remove was `PortalContainerContext`.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/dropdown-menu.tsx packages/ui/src/components/DropdownMenu.tsx`
- Package updates:
  - Updated `packages/ui/src/components/DropdownMenu.tsx` to use package-local `cn` import (`../lib/cn`).
  - Removed app-only `PortalContainerContext` dependency and switched to default Radix portal behavior.
  - No new dependency additions were required (`@radix-ui/react-dropdown-menu` was already present in `@vibe/ui`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/tasks/AgentSelector.tsx`
  - `frontend/src/components/tasks/BranchSelector.tsx`
  - `frontend/src/components/tasks/ConfigSelector.tsx`
  - `frontend/src/components/tasks/RepoSelector.tsx`
  - `frontend/src/components/tasks/VariantSelector.tsx`
  - `frontend/src/components/ui-new/primitives/SubIssueRow.tsx`
  - `frontend/src/components/ui-new/views/IssueWorkspaceCard.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Migration in `components/ui` can continue with low-risk primitives.
- Next recommended candidate is `frontend/src/components/ui/select.tsx` (similar extraction pattern), which will require adding `@radix-ui/react-select` to `packages/ui/package.json` and removing `PortalContainerContext` coupling.
- `frontend/src/components/ui/dialog.tsx` should remain deferred for now due app-level keyboard scope coupling (`react-hotkeys-hook`, `@/keyboard`).

## 2026-02-21 - UI package extraction: Select

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining extraction scope
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `frontend/src/components/ui/select.tsx` as the next candidate after `DropdownMenu`.
- It follows the same extraction pattern (Radix primitive + Tailwind styles) and has bounded callsite impact.
- Main coupling to remove was `PortalContainerContext`.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/select.tsx packages/ui/src/components/Select.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Select.tsx` to use package-local `cn` import (`../lib/cn`).
  - Removed app-only `PortalContainerContext` dependency and switched to default Radix portal behavior.
  - Added explicit `@radix-ui/react-select` dependency to `packages/ui/package.json`.
  - Synced lockfile (`pnpm-lock.yaml`) via `pnpm install`.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/org/MemberListItem.tsx`
  - `frontend/src/components/dialogs/tasks/EditorSelectionDialog.tsx`
  - `frontend/src/components/dialogs/org/InviteMemberDialog.tsx`
  - `frontend/src/components/dialogs/CreateWorkspaceFromPrDialog.tsx`
  - `frontend/src/components/dialogs/scripts/ScriptFixerDialog.tsx`
  - `frontend/src/components/dialogs/settings/CreateConfigurationDialog.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- `components/ui` extraction can continue with similar low-risk primitives.
- Next recommended candidate is `frontend/src/components/ui/tooltip.tsx` (same portal decoupling pattern, no additional package dependencies expected).
- `frontend/src/components/ui/dialog.tsx` remains deferred due app-level keyboard scope coupling (`react-hotkeys-hook`, `@/keyboard`).

## 2026-02-21 - UI package extraction: ui/tooltip (as RadixTooltip)

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining extraction scope
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `frontend/src/components/ui/tooltip.tsx` as the next candidate after `Select`.
- It matches the same low-risk extraction pattern as `DropdownMenu` and `Select` (Radix primitive + app portal decoupling).
- New information: `@vibe/ui` already contains `packages/ui/src/components/Tooltip.tsx` with a different API, so this extracted component needed a distinct filename to preserve readability and avoid API conflicts.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/tooltip.tsx packages/ui/src/components/RadixTooltip.tsx`
- Package updates:
  - Updated `packages/ui/src/components/RadixTooltip.tsx` to use package-local `cn` import (`../lib/cn`).
  - Removed app-only `PortalContainerContext` dependency and switched to default Radix portal behavior.
  - No new package dependencies were required (`@radix-ui/react-tooltip` was already present in `@vibe/ui`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/tasks/BranchSelector.tsx`
  - `frontend/src/components/tasks/Toolbar/GitOperations.tsx`
  - `frontend/src/components/ui-new/views/KanbanIssuePanel.tsx`
  - `frontend/src/components/ui-new/views/IssueCommentsSection.tsx`
  - `frontend/src/components/ui-new/views/KanbanBoard.tsx`
  - `frontend/src/components/NormalizedConversation/PendingApprovalEntry.tsx`
  - `frontend/src/components/ui/wysiwyg/nodes/component-info-node.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Because of the existing `@vibe/ui/components/Tooltip` API, `ui/tooltip.tsx` was extracted under `RadixTooltip` to keep both component interfaces explicit.
- Remaining `components/ui` extract-later candidate is primarily `ui/dialog.tsx`, but it remains high-coupling due keyboard scope integration (`react-hotkeys-hook`, `@/keyboard`).
- Next recommended extraction should either:
  - target `ui/dialog.tsx` with explicit decoupling strategy, or
  - shift to a new package scope (`@vibe/editor-ui`) per audit recommendation.

## 2026-02-21 - UI package extraction: ui/table/table

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining extraction scope
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `frontend/src/components/ui/table/table.tsx` as the next candidate.
- Although marked `extract-later` in the audit, it is a low-coupling presentational primitive and was straightforward to package.
- New information: `frontend/src/components/ui/table/data-table.tsx` currently has no imports in `frontend/src`, so this move had minimal callsite risk.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/table/table.tsx packages/ui/src/components/Table.tsx`
- Package updates:
  - Updated `packages/ui/src/components/Table.tsx` to use package-local `cn` import (`../lib/cn`).
  - Preserved the existing component surface (`Table`, `TableHead`, `TableBody`, `TableRow`, `TableHeaderCell`, `TableCell`, `TableEmpty`, `TableLoading`).
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui/table/data-table.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- `ui/table/table.tsx` is now fully extracted into `@vibe/ui`.
- Remaining near-term extraction options from this area are:
  - `frontend/src/components/ui/table/data-table.tsx` (now likely easy, but currently unused), or
  - `frontend/src/components/ui/dialog.tsx` (still higher coupling due keyboard scope integration).

## 2026-02-21 - UI package extraction: ui/table/data-table

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining extraction scope
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `frontend/src/components/ui/table/data-table.tsx` as the next candidate after `ui/table/table`.
- It is a reusable, low-coupling wrapper around table primitives and straightforward to extract.
- New information: there were no active imports of this file in `frontend/src` at extraction time.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/table/data-table.tsx packages/ui/src/components/DataTable.tsx`
- Package updates:
  - Updated `packages/ui/src/components/DataTable.tsx` to import `Table` primitives via package-local relative path (`./Table`) instead of package self-import.
  - Added explicit React import for type usage consistency in package components.
- Callsite updates:
  - No callsite updates were required because there were no references to `frontend/src/components/ui/table/data-table.tsx`.

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- The `ui/table` extraction track is now fully moved into `@vibe/ui` (`Table` + `DataTable`).
- Remaining `components/ui` extraction candidate is primarily `ui/dialog.tsx`, which is still higher-coupling due keyboard scope integration (`react-hotkeys-hook`, `@/keyboard`).
- After `ui/dialog.tsx`, the next major package split should likely follow the audit recommendation for a dedicated `@vibe/editor-ui` scope (`components/ui/wysiwyg`).

## 2026-02-21 - UI package extraction: ui/dialog (as KeyboardDialog)

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining extraction scope
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `frontend/src/components/ui/dialog.tsx` as the next candidate.
- It was the main remaining `components/ui` extraction target after the table components.
- New information: `@vibe/ui` already had `packages/ui/src/components/Dialog.tsx` (Radix-based API), so this extraction required a distinct filename to avoid API collision.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/dialog.tsx packages/ui/src/components/KeyboardDialog.tsx`
- Package updates:
  - Replaced app-only imports (`@/lib/utils`, `@/keyboard`) with package-safe imports and local scope constants.
  - Kept dialog keyboard behavior using `react-hotkeys-hook` directly (`esc` close behavior + `enter` submit behavior, scoped to dialog).
  - Added `react-hotkeys-hook` dependency to `packages/ui/package.json` and synced lockfile.
- Callsite updates to `@vibe/ui` subpath imports:
  - Updated all imports from `@/components/ui/dialog` to `@vibe/ui/components/KeyboardDialog` across dialogs and ui-new dialogs (34 files).

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- Dialog extraction is now complete for the legacy app dialog API, without conflicting with existing `@vibe/ui/components/Dialog`.
- Remaining `frontend/src/components/ui/*` files are not strong `@vibe/ui` candidates (`pr-comment-card` is keep-app; `ui/wysiwyg` is better suited for a dedicated `@vibe/editor-ui` package per audit).
- Next package extraction track should likely shift to the editor-scope split.

## 2026-02-21 - UI package extraction: wysiwyg/typeahead-menu-components

Plan checklist update:
- [x] Read `docs/frontend-ui-library-refactor-audit.md`
- [x] Read existing `progress.txt`
- [x] Assess next component candidate from remaining extraction scope
- [x] Move component with `git mv` before refactor edits
- [x] Update all frontend callsites
- [x] Run quality checks (`format`, `frontend:check`, `ui:check`, `frontend:lint`, `ui:lint`)
- [x] Update plan status and append progress log

Assessment:
- Selected `frontend/src/components/ui/wysiwyg/plugins/typeahead-menu-components.tsx` as the next low-risk candidate.
- It is a UI-only component module (no app store/context coupling) and had only two direct callsites.
- New information: remaining extraction work now clusters around the `ui/wysiwyg` subsystem and is better handled as an editor-focused track.

Refactor completed:
- Moved with history preservation:
  - `git mv frontend/src/components/ui/wysiwyg/plugins/typeahead-menu-components.tsx packages/ui/src/components/TypeaheadMenu.tsx`
- Package updates:
  - No internal code changes were required in the moved component.
  - No new dependencies were required in `@vibe/ui`.
- Callsite updates to `@vibe/ui` subpath imports:
  - `frontend/src/components/ui/wysiwyg/plugins/file-tag-typeahead-plugin.tsx`
  - `frontend/src/components/ui/wysiwyg/plugins/slash-command-typeahead-plugin.tsx`

Validation:
- `pnpm run format` ✅
- `pnpm run frontend:check` ✅
- `pnpm run ui:check` ✅
- `pnpm run frontend:lint` ✅
- `pnpm run ui:lint` ✅

Plan adjustments from new information:
- `TypeaheadMenu` extraction confirms that additional editor primitives can be moved incrementally with low risk.
- Most remaining candidates are `ui/wysiwyg` scoped; practical next step is to continue this editor-oriented extraction path (or formalize it under a dedicated `@vibe/editor-ui` package as recommended by the audit).
