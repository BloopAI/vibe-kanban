---
title: "Deploy with Cloudflare Tunnel"
description: "Securely expose your self-hosted Vibe Kanban using Cloudflare Tunnel"
---

[Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/) provides a secure way to expose your self-hosted Vibe Kanban instance to the internet without opening ports on your firewall. This guide shows how to deploy Vibe Kanban on any server and expose it through Cloudflare.

## Why Cloudflare Tunnel?

- **No open ports** - Your server doesn't need any inbound ports open
- **Automatic HTTPS** - Cloudflare handles SSL certificates
- **DDoS protection** - Cloudflare's network protects your origin
- **Global CDN** - Static assets served from Cloudflare's edge
- **Zero Trust ready** - Integrate with Cloudflare Access for additional security

## Prerequisites

- A server (VPS, home server, or cloud VM) with:
  - **Docker** and **Docker Compose** installed
  - **2GB RAM** minimum
- A **Cloudflare account** with a domain added
- OAuth credentials from [GitHub](https://github.com/settings/developers) or [Google](https://console.cloud.google.com/apis/credentials)

## How It Works

Cloudflare Tunnel creates an encrypted outbound connection from your server to Cloudflare's network. Users connect to Cloudflare, which routes traffic through the tunnel to your server. Your server never exposes any ports to the internet.

## Step 1: Set Up Your Server

SSH into your server and install Docker:

```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com | sh
sudo usermod -aG docker $USER
# Log out and back in
```

Clone the repository:

```bash
git clone https://github.com/BloopAI/vibe-kanban.git
cd vibe-kanban
```

## Step 2: Create Cloudflare Tunnel

1. Go to [Cloudflare Zero Trust Dashboard](https://one.dash.cloudflare.com/)
2. Navigate to **Networks** → **Tunnels**
3. Click **Create a tunnel**
4. Choose **Cloudflared** as the connector
5. Name your tunnel (e.g., `vibe-kanban`)
6. Copy the tunnel token - you'll need it later

## Step 3: Configure Public Hostname

In the tunnel configuration:

1. Click **Public Hostnames** tab
2. Add a hostname:
   - **Subdomain**: `vk` (or your choice)
   - **Domain**: Select your domain
   - **Service**: `http://remote-server:8081`

This creates `vk.yourdomain.com` pointing to your Vibe Kanban instance.

## Step 4: Configure OAuth

Update your OAuth application callback URLs:

<Tabs>
<Tab title="GitHub">
- **Authorization callback URL**: `https://vk.yourdomain.com/v1/oauth/github/callback`
</Tab>

<Tab title="Google">
- **Authorized redirect URI**: `https://vk.yourdomain.com/v1/oauth/google/callback`
</Tab>
</Tabs>

## Step 5: Create Environment File

Generate secrets:

```bash
# Generate JWT secret
openssl rand -base64 48

# Generate Electric role password
openssl rand -base64 32
```

Create `.env.remote` in the repository root:

```env .env.remote
# Required secrets
VIBEKANBAN_REMOTE_JWT_SECRET=<your_jwt_secret>
ELECTRIC_ROLE_PASSWORD=<your_electric_password>

# Your Cloudflare hostname
DOMAIN=vk.yourdomain.com

# OAuth (at least one required)
GITHUB_OAUTH_CLIENT_ID=your_github_client_id
GITHUB_OAUTH_CLIENT_SECRET=your_github_client_secret
GOOGLE_OAUTH_CLIENT_ID=your_google_client_id
GOOGLE_OAUTH_CLIENT_SECRET=your_google_client_secret

# Email (leave empty to disable)
LOOPS_EMAIL_API_KEY=

# Cloudflare Tunnel token
TUNNEL_TOKEN=<your_tunnel_token_from_step_2>
```

## Step 6: Create Docker Compose File

Create `docker-compose.cloudflare.yml` in the `crates/remote` directory:

```yaml docker-compose.cloudflare.yml
services:
  cloudflared:
    image: cloudflare/cloudflared:latest
    restart: unless-stopped
    command: tunnel --no-autoupdate run --token ${TUNNEL_TOKEN}
    depends_on:
      remote-server:
        condition: service_healthy

  remote-db:
    image: postgres:16-alpine
    command: ["postgres", "-c", "wal_level=logical"]
    restart: unless-stopped
    environment:
      POSTGRES_DB: remote
      POSTGRES_USER: remote
      POSTGRES_PASSWORD: remote
    volumes:
      - remote-db-data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U remote -d remote"]
      interval: 5s
      timeout: 5s
      retries: 5
      start_period: 5s

  electric:
    image: electricsql/electric:1.3.3
    working_dir: /app
    restart: unless-stopped
    environment:
      DATABASE_URL: postgresql://electric_sync:${ELECTRIC_ROLE_PASSWORD}@remote-db:5432/remote?sslmode=disable
      PG_PROXY_PORT: 65432
      LOGICAL_PUBLISHER_HOST: electric
      AUTH_MODE: insecure
      ELECTRIC_INSECURE: true
      ELECTRIC_MANUAL_TABLE_PUBLISHING: true
      ELECTRIC_USAGE_REPORTING: false
      ELECTRIC_FEATURE_FLAGS: allow_subqueries,tagged_subqueries
    volumes:
      - electric-data:/app/persistent
    depends_on:
      remote-db:
        condition: service_healthy
      remote-server:
        condition: service_healthy

  remote-server:
    build:
      context: ../..
      dockerfile: crates/remote/Dockerfile
    restart: unless-stopped
    depends_on:
      remote-db:
        condition: service_healthy
    environment:
      RUST_LOG: info,remote=info
      SERVER_DATABASE_URL: postgres://remote:remote@remote-db:5432/remote
      SERVER_LISTEN_ADDR: 0.0.0.0:8081
      ELECTRIC_URL: http://electric:3000
      SERVER_PUBLIC_BASE_URL: https://${DOMAIN}
      VITE_APP_BASE_URL: https://${DOMAIN}
      VITE_API_BASE_URL: https://${DOMAIN}
      GITHUB_OAUTH_CLIENT_ID: ${GITHUB_OAUTH_CLIENT_ID:-}
      GITHUB_OAUTH_CLIENT_SECRET: ${GITHUB_OAUTH_CLIENT_SECRET:-}
      GOOGLE_OAUTH_CLIENT_ID: ${GOOGLE_OAUTH_CLIENT_ID:-}
      GOOGLE_OAUTH_CLIENT_SECRET: ${GOOGLE_OAUTH_CLIENT_SECRET:-}
      VIBEKANBAN_REMOTE_JWT_SECRET: ${VIBEKANBAN_REMOTE_JWT_SECRET}
      ELECTRIC_ROLE_PASSWORD: ${ELECTRIC_ROLE_PASSWORD}
      LOOPS_EMAIL_API_KEY: ${LOOPS_EMAIL_API_KEY:-}
    healthcheck:
      test: ["CMD", "wget", "--spider", "-q", "http://127.0.0.1:8081/health"]
      interval: 5s
      timeout: 5s
      retries: 10
      start_period: 10s

volumes:
  remote-db-data:
  electric-data:
```

## Step 7: Deploy

```bash
cd crates/remote

# Build and start all services
docker compose --env-file ../../.env.remote -f docker-compose.cloudflare.yml up -d --build

# Watch logs
docker compose -f docker-compose.cloudflare.yml logs -f
```

<Info>
The first build takes 10-15 minutes as it compiles the Rust backend. The `cloudflared` container will automatically connect to Cloudflare once the remote-server is healthy.
</Info>

## Step 8: Verify Deployment

1. Check tunnel status in [Cloudflare Dashboard](https://one.dash.cloudflare.com/) → **Networks** → **Tunnels**
2. Open `https://vk.yourdomain.com` in your browser
3. You should see the Vibe Kanban login page

## Connecting Your Client

Configure the Vibe Kanban desktop client:

```bash
export VK_SHARED_API_BASE=https://vk.yourdomain.com
```

## Optional: Cloudflare Access

For additional security, you can require authentication before users reach Vibe Kanban:

1. Go to **Access** → **Applications** in Zero Trust dashboard
2. Click **Add an application** → **Self-hosted**
3. Configure:
   - **Application domain**: `vk.yourdomain.com`
   - **Session duration**: 24 hours (or your preference)
4. Add an access policy (e.g., allow specific email domains)

<Warning>
If you enable Cloudflare Access, your OAuth flow still happens after Access authentication. This provides two layers of security but may be redundant for some use cases.
</Warning>

## Updating

```bash
cd vibe-kanban
git pull origin main

cd crates/remote
docker compose --env-file ../../.env.remote -f docker-compose.cloudflare.yml up -d --build
```

## Backup

### Database Backup

```bash
docker compose -f docker-compose.cloudflare.yml exec remote-db \
  pg_dump -U remote remote > backup_$(date +%Y%m%d).sql
```

### Restore

```bash
docker compose -f docker-compose.cloudflare.yml exec -T remote-db \
  psql -U remote remote < backup.sql
```

## Monitoring

### View Logs

```bash
# All services
docker compose -f docker-compose.cloudflare.yml logs -f

# Specific service
docker compose -f docker-compose.cloudflare.yml logs -f cloudflared
docker compose -f docker-compose.cloudflare.yml logs -f remote-server
```

### Tunnel Metrics

View tunnel metrics in the Cloudflare Zero Trust dashboard under **Networks** → **Tunnels** → Your tunnel → **Metrics**.

## Troubleshooting

<AccordionGroup>
<Accordion title="Tunnel shows as disconnected">
Check cloudflared logs:

```bash
docker compose -f docker-compose.cloudflare.yml logs cloudflared
```

Common causes:
- Invalid tunnel token
- Network connectivity issues
- Remote server not healthy yet
</Accordion>

<Accordion title="502 Bad Gateway errors">
The remote server might not be ready. Check:

```bash
docker compose -f docker-compose.cloudflare.yml ps
docker compose -f docker-compose.cloudflare.yml logs remote-server
```

Ensure the health check is passing before cloudflared tries to route traffic.
</Accordion>

<Accordion title="OAuth callback fails">
Verify your callback URLs match exactly:
- Include `https://` not `http://`
- Check for trailing slashes
- Ensure the domain matches your tunnel hostname
</Accordion>

<Accordion title="Slow initial page load">
The first request after deployment may be slow as the server warms up. This is normal. Subsequent requests will be faster.

You can add Cloudflare caching rules for static assets to improve performance.
</Accordion>
</AccordionGroup>

## Security Considerations

<CardGroup cols={2}>
<Card title="No open ports" icon="shield">
  Your server has no inbound ports open. All traffic goes through the encrypted Cloudflare tunnel.
</Card>

<Card title="Firewall everything" icon="fire">
  Configure your server firewall to block all inbound traffic. Only the outbound tunnel connection is needed.
</Card>

<Card title="Use strong secrets" icon="key">
  Generate unique, strong passwords for all secrets. Never reuse passwords across services.
</Card>

<Card title="Regular updates" icon="arrows-rotate">
  Keep your Docker images and Vibe Kanban code updated for security patches.
</Card>
</CardGroup>
